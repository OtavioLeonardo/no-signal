---
import { formatDate } from '@/utils/data.util';
import Tags from './Tags.astro';
import PinnedBadge from './PinnedBadge.astro';
import type { CollectionEntry } from 'astro:content';

interface Props {
	post: CollectionEntry<'posts'>;
}

const { post } = Astro.props;
const isPinned = post.data.isPinned === true;
const postUrl = `/posts/${post.slug}`;
---

<a href={postUrl} class="group block h-full">
    <div
		class="h-full flex flex-col rounded-2xl bg-white p-6 border border-black/5 shadow-sm transition-all duration-300 ease-out hover:shadow-md hover:-translate-y-1 dark:bg-[#1C1C1E] dark:border-white/10 dark:shadow-none dark:hover:bg-[#2C2C2E]"
	>
        {/* Top Meta Info */}
        <div class="flex items-center justify-between mb-4">
            <div class="flex items-center gap-2 text-xs font-medium text-gray-400 uppercase tracking-wide">
                {isPinned && <PinnedBadge size="sm" />}
                <time>{formatDate(post.data.pubDate.toString())}</time>
            </div>
        </div>

        {/* Title */}
        <h3 class="text-xl font-bold text-gray-900 dark:text-white leading-tight mb-3 group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors">
            {post.data.title}
        </h3>

        {/* Tags */}
        <div class="mb-4">
            <Tags tags={post.data.tags} />
        </div>
        
        {/* Excerpt */}
        <p class="flex-1 text-sm text-gray-500 dark:text-gray-400 leading-relaxed line-clamp-4 mb-6">
            {post.data.excerpt}
        </p>

        {/* Read More Link (Pseudo-button) */}
        <div class="mt-auto flex items-center text-sm font-semibold text-blue-600 dark:text-blue-400 opacity-0 group-hover:opacity-100 transition-opacity -translate-x-2 group-hover:translate-x-0 duration-300">
            Read article
            <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 ml-1" viewBox="0 0 20 20" fill="currentColor">
                <path fill-rule="evenodd" d="M12.293 5.293a1 1 0 011.414 0l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-2.293-2.293a1 1 0 010-1.414z" clip-rule="evenodd" />
            </svg>
        </div>
	</div>
</a>