---
import { AppConfig } from '@/utils/AppConfig';
import Base from '@/layouts/Base.astro';
import Hero from '@/components/Hero.astro';
import Section from '@/components/Section.astro'; // âœ… 1. è¨˜å¾—å¼•å…¥é€™å€‹
import LatestPosts from '@/components/LatestPosts.astro';
import { sortPostsByDate } from '@/utils/data.util';
import type { MarkdownInstance } from 'astro'; // ä¿®æ­£é¡å‹å¼•ç”¨

const { title } = AppConfig;
const { description } = AppConfig;

const allPosts = Object.values(
	import.meta.glob('./posts/*.md', { eager: true })
) as MarkdownInstance<any>[];
allPosts.sort(sortPostsByDate);
const latestPosts = allPosts.slice(0, 3);

// âœ… 2. åœ¨é€™è£¡æ‰‹å‹•å®šç¾©ä½ æƒ³è¦é¡¯ç¤ºçš„ã€Œå¸¸ç”¨æ¨™ç±¤ã€
// name: é¡¯ç¤ºçš„åå­—, slug: æ¨™ç±¤å°æ‡‰çš„ç¶²å€è·¯å¾‘
const popularTags = [
    { name: 'éŸ³æ¨‚æ•™å­¸', slug: 'éŸ³æ¨‚æ•™å­¸' },
    { name: 'æ”å½±', slug: 'æ”å½±' },
    { name: 'å€‹äººæ€è€ƒ', slug: 'å€‹äººæ€è€ƒ' },
    { name: 'è³½é“åˆ†æ', slug: 'è³½é“åˆ†æ' },
];
---

<Base head={{ title, description }}>
	<Hero />

    {/* âœ… 3. åœ¨ Hero å’Œ LatestPosts ä¹‹é–“æ’å…¥æ¨™ç±¤å€å¡Š */}
    <Section>
        <div class="py-8 border-b border-stone-200 dark:border-stone-800">
            <div class="flex items-center gap-2 mb-4">
                <span class="text-xl">ğŸ·ï¸</span>
                <h3 class="font-bold text-lg text-stone-800 dark:text-stone-200">
                    Explore Topics
                </h3>
            </div>

            <div class="flex flex-wrap gap-3">
                {popularTags.map((tag) => (
                    <a 
                        href={`/tags/${tag.slug}`} 
                        class="px-4 py-1.5 rounded-full bg-stone-100 dark:bg-stone-800 text-stone-600 dark:text-stone-300 text-sm font-medium hover:bg-orange-500 hover:text-white dark:hover:bg-orange-600 dark:hover:text-white transition-all transform hover:-translate-y-0.5"
                    >
                        #{tag.name}
                    </a>
                ))}
                
                {/* å¯é¸ï¼šå¦‚æœä½ æœ‰ä¸€å€‹ã€Œæ‰€æœ‰æ¨™ç±¤ã€çš„é é¢ï¼Œå¯ä»¥åŠ é€™ä¸€å€‹æŒ‰éˆ•
                   <a href="/tags" class="px-4 py-1.5 text-sm text-stone-400 hover:text-orange-500 transition-colors">
                       All Tags â†’
                   </a>
                */}
            </div>
        </div>
    </Section>

	<LatestPosts posts={latestPosts} />
</Base>