---
import { AppConfig } from '@/utils/AppConfig';
import Base from '@/layouts/Base.astro';
import Hero from '@/components/Hero.astro';
import Section from '@/components/Section.astro';
import LatestPosts from '@/components/LatestPosts.astro';
import { getCollection } from 'astro:content';

const { title, description } = AppConfig;

// 读取数据逻辑保持不变...
const allPosts = await getCollection('posts');
allPosts.sort((a, b) => {
    const isAPinned = a.data.isPinned || false;
    const isBPinned = b.data.isPinned || false;
    if (isAPinned && !isBPinned) return -1;
    if (!isAPinned && isBPinned) return 1;
    return b.data.pubDate.valueOf() - a.data.pubDate.valueOf();
});
const latestPosts = allPosts.slice(0, 3);

// 标签配置保持不变...
const popularTags = [
    { name: '音乐教学', slug: '音乐教学' },
    { name: '摄影', slug: '摄影' },
    { name: '个人思考', slug: '个人思考' },
    { name: '赛道分析', slug: '赛道分析' },
    { name: '阅读', slug: '阅读' },
];
---

<Base head={{ title, description }}>
    
    {/* 1. Hero 已经改为居中，视觉重心稳了 */}
    <Hero />

    {/* 2. 标签区块调整：
           - 移除了 py-10，改为 py-6，大幅减少高度
           - 移除了 border-b，因为 Apple 风格更喜欢用 whitespace 而不是硬分割线
           - 增加了 justify-center 让标签在 Hero 下方居中排列，保持中轴线统一
    */}
    <Section>
        <div class="py-6 flex flex-col items-center">
            
            {/* 标题栏：居中 */}
            <div class="flex items-center gap-2 mb-4 opacity-80">
                <h3 class="font-bold text-xs uppercase tracking-widest text-gray-400 dark:text-gray-500">
                    Explore Topics
                </h3>
            </div>

            {/* 标签列表：居中排列 */}
            <div class="flex flex-wrap justify-center gap-2">
                {popularTags.map((tag) => (
                    <a 
                        href={`/tags/${tag.slug}`} 
                        class="px-4 py-2 rounded-full 
                               bg-white dark:bg-white/5 
                               border border-gray-200/50 dark:border-white/5
                               text-gray-600 dark:text-gray-300 
                               text-sm font-medium tracking-tight
                               shadow-sm hover:shadow-md 
                               hover:scale-105 hover:bg-gray-50 dark:hover:bg-white/10
                               transition-all duration-300 ease-out"
                    >
                        #{tag.name}
                    </a>
                ))}
            </div>
        </div>
    </Section>

    {/* 3. 最新文章：紧接着 Tags，利用 LatestPosts 内部的 padding 即可 */}
    <LatestPosts posts={latestPosts} />
</Base>