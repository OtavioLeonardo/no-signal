---
import Base from '@/layouts/Base.astro';
import Section from '@/components/Section.astro';
import '@pagefind/default-ui/css/ui.css'; // å¼•å…¥é»˜è®¤æ ·å¼
---

<Base head={{ title: 'Search', description: 'Search my blog' }}>
  <Section>
    <div class="py-12">
      <h1 class="text-3xl font-bold mb-8">ğŸ” Search</h1>
      
      <div id="search" class="p-4 bg-white dark:bg-stone-800 rounded-xl shadow-sm border border-stone-200 dark:border-stone-700"></div>

    </div>
  </Section>
</Base>

<script>
  import { PagefindUI } from "@pagefind/default-ui";

  // ç­‰å¾…é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–æœç´¢æ¡†
  document.addEventListener("DOMContentLoaded", () => {
    new PagefindUI({
      element: "#search",
      showSubResults: true, // æ˜¾ç¤ºæ–‡ç« é‡Œçš„å°æ ‡é¢˜åŒ¹é…
      excerptLength: 30,     // æ‘˜è¦é•¿åº¦
      resetStyles: false,    // ä½¿ç”¨æˆ‘ä»¬è‡ªå®šä¹‰çš„ CSS å˜é‡
    });
  });
</script>

<style is:global>
  /* --- é€‚é…ä½ çš„åšå®¢ä¸»é¢˜ (æ©™è‰²/æ·±è‰²æ¨¡å¼) --- */
  :root {
    --pagefind-ui-scale: 1;
    --pagefind-ui-primary: #ea580c; /* ä½ çš„ä¸»é¢˜è‰² Orange-600 */
    --pagefind-ui-text: #1c1917;    /* Stone-900 */
    --pagefind-ui-background: transparent;
    --pagefind-ui-border: #e7e5e4;  /* Stone-200 */
    --pagefind-ui-tag: #f5f5f4;     /* Stone-100 */
    --pagefind-ui-border-radius: 0.5rem;
    --pagefind-ui-font: inherit; 
  }

  /* æ·±è‰²æ¨¡å¼é€‚é… */
  html.dark {
    --pagefind-ui-text: #fafaf9;    /* Stone-50 */
    --pagefind-ui-background: transparent;
    --pagefind-ui-border: #44403c;  /* Stone-700 */
    --pagefind-ui-tag: #292524;     /* Stone-800 */
  }

  /* ç»†èŠ‚å¾®è°ƒ */
  .pagefind-ui__search-input {
    font-weight: normal;
  }
  
  /* è®©æœç´¢ç»“æœé‡Œçš„å›¾ç‰‡ä¸è¦å¤ªå¤§ */
  .pagefind-ui__result-thumb {
    object-fit: cover;
  }
</style>